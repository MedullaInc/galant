{% extends "briefs/brief_list.html" %}
{% load bootstrap i18n %}

{% block section_title %}
    {% trans "Client Briefs" %}
{% endblock %}

{% block sidebar %}

    <a href="{% url 'client_detail' client.id %}">
        <button type="button" class="btn btn-default sidebar">
            {% trans "Back to Client" %}
        </button>
    </a>

    <a href="{% url 'add_brief' brief_type="client" type_id=client.id %}">
        <button type="button" class="btn btn-default sidebar" id="add_client_brief">
            {% trans "Create Brief" %}
        </button>
    </a>

{% endblock %}

{% block center_content %}
    <table class="table table-striped table-bordered">
        <thead>
        <th>{% trans "Title" %}</th>
        <th>{% trans "Status" %}</th>
        </thead>
        {% for brief in object_list %}
            <tr data-rel="{{ brief.id }}" style="cursor: pointer">
                <td>{{ brief.title.get_text }}</td>
                <td>{{ brief.get_status_display }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4">
                    No clients yet.
                </td>
            </tr>
        {% endfor %}
    </table>
{% endblock %}

{% block extra_body %}
    <script>
        $('.table > tbody > tr').click(function () {
            window.location.href = "{% url 'brief_detail' brief_type="client" type_id=client.id %}" +
                    $(this).attr('data-rel');
        });
    </script>
{% endblock %}