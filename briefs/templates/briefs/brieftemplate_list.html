{% extends "base_body.html" %}
{% load bootstrap i18n %}

{% block page_title %}
    {% trans "Brief Templates" %}
{% endblock %}

{% block content %}

    <div class="row">

        <div class="row">
            <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
            </div>
            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3">
                <a href="{% url 'briefs' %}">
                    <button type="button" class="btn btn-warning btn-add pull-right">
                        {% trans "Back to Briefs" %}
                    </button>
                </a>
                <a href="{% url 'add_brief_template' %}">
                    <button type="button" class="btn btn-success btn-add pull-right button-inline">
                        <span class="glyphicon glyphicon-plus"></span>
                        {% trans "Add Template" %}
                    </button>
                </a>
            </div>
            <br/>
            <br/>
            <br/>
        </div>

    </div>

    <div class="row">
        <div class="col-lg-12 widget">
            <br/>
            <table class="table table-striped">
                <thead>
                <th><b>{% trans "Name" %}</b></th>
                <th><b>{% trans "Last Modified" %}</b></th>
                </thead>
                {% for template in object_list %}
                    <tr data-rel="{{ template.id }}" style="cursor: pointer" class="template_row">
                        <td>{{ template.brief.name }}</td>
                        <td>{{ template.brief.modified|date:'Y-m-d H:i' }}</td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="4">
                            No templates yet.
                        </td>
                    </tr>
                {% endfor %}
            </table>
        </div>
    </div>

{% endblock %}

{% block extra_body %}
    <script>
        $('.table > tbody > tr.template_row').click(function () {
            window.location.href = "{% url 'brieftemplate_detail' %}" + $(this).attr('data-rel')
        });
    </script>
{% endblock %}