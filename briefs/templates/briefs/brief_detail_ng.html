{% extends "base_sidebar_enclosed.html" %}
{% load bootstrap i18n static %}

{% block scripts %}
    {{ block.super }}
    <script src="{% static "js/angular.js" %}"></script>
    <script src="{% static "js/angular-resource.js" %}"></script>
    <script src="{% static "djangular/js/django-angular.min.js" %}"></script>
    <script src="{% static "js/gallant.js" %}"></script>
    <script src="{% static "js/briefs.js" %}"></script>
{% endblock %}

{% block section_title %}
    {% trans title %}
{% endblock %}

{% block sidebar %}
    {% if object.client and not answer_set %}
        <form method="post">
            {% csrf_token %}
            <a>
                <button type="submit" class="btn btn-default sidebar" id="send_brief">
                    {% trans "Send Brief" %}
                </button>
            </a>
        </form>
    {% endif %}
    <a href="{% url 'add_brief_template' brief_id=object.id %}">
        <button type="button" class="btn btn-default sidebar" title="Create template from this brief.">
            {% trans "Use as Template" %}
        </button>
    </a>
{% endblock %}

{% block center_content %}
    <div ng-app="brief" ng-controller="glFormController"
         ng-init="init('{% firstof language LANGUAGE_CODE %}', '{{ csrf_token }}')">

        <div br-brief-detail brief-id="{{ object.pk }}" brief="object" endpoint="objectEndpoint"
             language="currentLanguage" forms="forms"
             client-id="{{ client.id }}" project-id="{{ project.id }}" quote-id="{{ quote.id }}"
             template-id="{{ template_id }}">
        </div>
    </div>
{% endblock %}