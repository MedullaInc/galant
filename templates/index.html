{% extends "base_body.html" %}

{% load bootstrap i18n %}

{% if user.is_authenticated %}
{% else %}
    {% block navbar %}
        <nav class="navbar">
            <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8">
                <div class="navbar-header">
                    <a class="brand" href="/">{{ site.name }} <span>Beta</span></a>
                </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                <ul class="nav pull-right" id="dropdown-menu">
                    <li class="dropdown-menu-element">
                        <button id="login_open" type="button" class="btn btn-default"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
                                id="settings-toggle">
                            Log in
                        </button>
                    </li>
                </ul>
            </div>

        </nav>
    {% endblock %}
{% endif %}

{% block head_title %}
    Manage clients, projects, and money.
{% endblock %}

{% block body %}
    <div id="login_popover" class="popover container" style="display: none">
        <form class="form" method="POST" action="{% url 'account_login' %}">
            {% csrf_token %}
            <div class="row">
                <div class="col-lg-12">
                    <h2 class="section_title">{% trans 'Login' %}</h2>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <input autofocus="autofocus" class="form-control" placeholder="Email"
                           type="email" value="" id="id_login" name="login"/>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <input autocomplete="off" class="form-control" placeholder="{% trans 'Password' %}"
                           type="password" id="id_password" name="password"/>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <button type="submit" class="btn btn-default btn-submit pull-right" name="submit_login">
                        {% trans 'Log in' %}
                    </button>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <a class="forgot pull-right" href="{% url 'account_reset_password' %}">
                        {% trans 'Forgot your password?' %}</a>
                </div>
            </div>
        </form>
    </div>
    {{ block.super }}
{% endblock %}

{% block content_div %}
    <div class="container landing_container">
        <div class="row">
            <div class="col-lg-12">
                <div id="landing_main">
                    <p id="main_overlay">
                        Manage clients, projects, and money &mdash; all in one place.
                    </p>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div id="landing_blurb" class="landing_section">
                    <p>
                        Galant is a management app for creative agencies and freelancers.
                        It was brewed in the heart of Silicon Valley, in close collaboration
                        with internationally acclaimed agencies.
                    </p>
                </div>
            </div>
        </div>
        <div class="row">
            <div id="landing_purpose_image" class="col-lg-6"></div>
            <div class="col-lg-6">
                <div id="landing_purpose" class="landing_section">
                    <div class="row">
                        <div class="col-lg-12">
                            <p>
                                Its sole purpose is to
                                help you operate your business, so that you can focus on what you do best: create.
                            </p>
                        </div>
                    </div>
                    {% if user.is_authenticated == False %}
                        <br><br><br>
                        <div class="row">
                            <div class="col-lg-12 centered">
                                <a href="{% url 'signup' %}" type="button" class="btn btn-default giant btn-add"
                                   name="signup">
                                    {% trans 'Request an Account' %}
                                </a>
                            </div>

                        </div>
                    {% endif %}

                </div>
            </div>
        </div>
    </div>
{% endblock %}


{% block extra_body %}
    <script>
        $('#login_open').popover({
            html: true,
            container: 'body',
            content: $('#login_popover').html(),
            title: false,
            placement: "bottom"
        });

        $('body').on('click', function (e) {
            var p = $('#login_open');
            if (!p.is(e.target) && p.has(e.target).length === 0 && $('.popover').has(e.target).length === 0) {
                p.popover('hide');
            }
        });

        $(window).resize(function () {
            $('#login_popover').popover('hide');
        });
    </script>
{% endblock %}
