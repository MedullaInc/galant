{% extends "quotes/quote_form.html" %}
{% load bootstrap i18n %}


{% block extra_form_inputs %}
    <ul id="tabs" class="nav nav-tabs" style="margin-bottom: -1px; border-bottom: 0">
        <li id="{{ native_language_code }}_tab" class="active" data-rel="{{ native_language_code }}"><a>
            {{ native_language }}</a></li>
        <li id="add_translation"><a>
            Add Translation</a>
        </li>
    </ul>

    <div class="rounded-border" style="border-top-left-radius: 0px">
        {{ block.super }}
    </div>
    <div id="language_select" style="display: none">
        {{ language_form|bootstrap }}
        <button id="language_add" type="button" class="btn btn-default">Add</button>
    </div>

{% endblock %}


{% block sidebar %}
{% endblock %}

{% block extra_body %}
    {{ block.super }}
    <script>
        $('#tabs').on("click", "li", function (e) {
            $(this).tab('show');
        });

        $('#add_translation').popover({
            html: true,
            content: $('#language_select').html(),
            title: "Select Language",
            placement: "bottom"
        }).click(function() {
            $('#language_add').click(function () {
                var l = $('#id_language').find(":selected");
                $('#add_translation').popover('hide');
                var tabHtml = '<li id="' + l.val() + '_tab" data-rel="' + l.val() + '"><a>' +
                l.text() + '</a></li>';
                var newTab = $('.nav-tabs > li:last').before(tabHtml);
                newTab.tab('show');
            });
        });
    </script>
{% endblock %}